{{$showDevHeader := .Development}}
{{$userData := .InjectedData.UserData}}
{{$appSettings := .InjectedData.AppSettings}}
{{$data := .InjectedData.Data}}

<!DOCTYPE html>
<html>
	<head>
        <title>{{template "html_title_app_name" .}}</title>

        {{template "html_head" .}}
	</head>
	<body>
		<!-- HEADER -->
		{{template "header-with-btns" .}}	

		<main>
            <div class="container">
                <!-- alerts for stuff -->

                {{if $data.IsInitialDefaultUserActive}}
                <div class="alert alert-warning">
                    <b>Warning!</b> The default initial user, admin@example.com, is still active. You should deactivate this user, change the user's password, and turn off all permissions for improved security.
                </div>
                {{end}}
            </div>

			<div class="container">
                
                <div class="row justify-content-center stretch-cards">
                    <!-- app management (creating, updating, key pairs, signing details) -->
                    <!-- creating, viewing, downloading licenses -->
					<div class="col col-12 col-md-6 col-lg-4 col-after-col--up-to-md">
						<div class="card flex-max-height">
                            <div class="card-header">
                                <h5>Licenses</h5>
                            </div>
							<div class="card-body">
                                {{if $userData.Administrator}}
                                <section>
                                    <div class="d-grid gap-2">
                                        <a class="btn btn-block btn-outline-primary" href="/app/licensing/apps/">Apps & License Details</a>
                                    </div>
                                </section>
                                <hr class="divider">
                                {{end}}

                                <section>
                                    <div class="d-grid gap-2">
                                        {{if $userData.CreateLicenses}}
                                        <a class="btn btn-block btn-outline-primary" href="/app/licensing/create-license/">Create License</a>
                                        {{end}}
                                        
                                        {{if $userData.ViewLicenses}}
                                        <a class="btn btn-block btn-outline-primary" href="/app/licensing/licenses/">View Licenses</a>
                                        {{end}}
                                    </div>
                                </section>
							</div>
						</div>
                    </div>
                    <!-- end licenses .col -->
                    
                    <!-- users, app settings, api keys, activity logs -->
                    {{if $userData.Administrator}}
					<div class="col col-12 col-md-6 col-lg-4 col-after-col--up-to-md">
						<div class="card flex-max-height">
                            <div class="card-header">
                                <h5>Settings</h5>
                            </div>
							<div class="card-body">
                                <!-- settings -->
                                <section>
                                    <div class="d-grid gap-2">
                                        <a class="btn btn-block btn-outline-primary" href="/app/administration/users/">Users</a>
                                        <a class="btn btn-block btn-outline-primary" href="/app/administration/app-settings/">App Settings</a>
                                        {{if $appSettings.AllowAPIAccess}}
                                        <a class="btn btn-block btn-outline-primary" href="/app/administration/api-keys/">API Keys</a>
                                        {{end}}
                                    </div>
                                </section>
                                <hr class="divider">
                                
                                <!-- data -->
                                <section>
                                    <div class="d-grid gap-2">
                                        {{if $appSettings.EnableActivityLogging}}
                                        <a class="btn btn-block btn-outline-primary" href="/app/administration/activity-log/">Activity Log</a>
                                        {{end}}
                                        
                                        <a class="btn btn-block btn-outline-primary" href="/app/administration/user-logins/">User Logins</a>
                                    </div>
                                </section>
                                
                                <!-- admin tools -->
                                {{if $userData.Administrator}}
                                <hr class="divider">
                                <section>
                                    <div class="d-grid gap-2">
                                        <a class="btn btn-block btn-outline-primary" href="/app/administration/tools/">Admin Tools</a>
                                    </div>
                                </section>
                                {{end}}
							</div>
						</div>
                    </div> 
                    {{end}}
                    <!-- end settings .col-->
				</div>
			</div>
		</main>

		{{template "footer"}}
		{{template "html_scripts" .}}
	</body>
</html>